# SAM2 Hiera-Large W4A4 with SVDQuant Configuration
# 4-bit weights and 4-bit activations with low-rank compensation

model:
  name: large
  device: cuda
  dtype: float16

cache:
  root: ./cache/sam2

quant:
  calib:
    path: /pfss/mlde/workspaces/mlde_wsp_IAS_SAMMerge/deepcompressor/data/coco/val2017
    num_samples: 256
    batch_size: 1
    image_size: 1024
    seed: 42

  wgts:
    dtype: uint4
    group_shapes: [[1, 128]]
    kernel_gptq:
      damp_percentage: 0.01
      block_size: 128
      num_inv_tries: 250
    low_rank:
      rank: 32
      exclusive: false

  ipts:
    dtype: uint4
    group_shapes: [[1, -1]]
    static: false

  opts:
    dtype: null

  smooth:
    proj:
      granularity: Layer
      strategy: GridSearch
      num_grids: 20
      alpha: 0.5

  rotation:
    transforms: [hadamard]
    random: false

output:
  root: ./outputs/sam2
  job: hiera_large_w4a4_svdquant

save_model: true
seed: 42
